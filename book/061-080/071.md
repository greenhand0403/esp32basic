电机控制

05_Motor_Control-2

上传程序后，电机打开1秒，关闭3秒，再次打开和关闭，然后打开1秒。之后，由于内置的PWM，它逐渐减速，直到停止。为了关闭NPN三极管并关闭电机，在 IO17 引脚上输出低电平(LOW)；为了打开三极管并打开电动机，则输出高电平(HIGH)。请注意，与前面的大多数程序不同，本程序只执行一次而不是循环执行，要重新启动它，必须关闭电源然后打开(OFFON)。下面是程序的一个片段，它显示了如何改变电机的启动和停止频率，以及每次打开它时的运行时长。
你也可通过闪存驱动器访问本程序。

打开次数

将此参数从3变为5，观察电机是否从打开3次变为5次。

电机运行

将此参数从1000降至10，确保在更短时间内关闭电机。

打开次数

将此参数从3变为5，观察电机是否从打开3次变为5次。

```c
  for (int i = 0; i < 3; i++)
  {
    digitalWrite(MOTOR_PIN, LOW);
    delay(3000);
    digitalWrite(MOTOR_PIN, HIGH);
    delay(1000);
  }
  delay(1000);
  for (int i = 255; i > 30; i--)
  {
    analogWrite(MOTOR_PIN, i);
    delay(10);
  }
  for (int i = 30; i > 0; i--)
  {
    analogWrite(MOTOR_PIN, i);
    delay(800);
  }
```

每次在程序修改后，请将文件重命名并保存到你的项目文件夹中。别忘记将更新后的程序上传到111号模块(ESP32)！