电机控制

05_Motor_Control-3

在本程序中，通过继电器连接到D9数字引脚的电机在一段时间（即1秒）内被打开三次。请注意，与前面的大多数程序不同，本程序只执行一次而不是循环执行，要重新启动它，必须关闭电源然后打开(OFF-ON)。下面是程序的一个片段，显示了如何更改每次打开时的运行时间。在运行本电路时，不得使用PWM来控制电机速度，因为这会很快导致继电器故障。

你也可通过闪存驱动器访问本程序。

运行时长
将此参数提高到4000，观察每次打开电机时，电机运行时间是否变长。

打开次数
将此参数变为5，观察电机是否从打开3次变为打开5次。

```c
void setup()
{
  pinMode(MOTOR_PIN, OUTPUT);

  // Switch off the motor at the beginning
  digitalWrite(MOTOR_PIN, LOW);
  int switchDelay = 1000;
  for (int i = 0; i < 3; i++)
  {
    digitalWrite(MOTOR_PIN, HIGH);
    delay(switchDelay);
    digitalWrite(MOTOR_PIN, LOW);
    delay(switchDelay);  
  }
}
```

如果想将螺旋桨风叶安装在电机上并测试本电路，请小心操作，因为风叶可能飞走！

每次在程序修改后，请将文件重命名并保存到你的项目文件夹中。别忘记将更新后的程序上传到111号模块(ESP32)！